@echo off
chcp 65001 >nul
echo ЁЯЪА р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕гр╕░р╕Ър╕Ър╕Ир╕│р╣Бр╕Щр╕Бр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Др╕ер╕╖р╣Ир╕Щр╣Др╕Яр╕Яр╣Йр╕▓р╕лр╕▒р╕зр╣Гр╕И
echo ==========================================

REM р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Node.js р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╣Йр╕зр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
node --version >nul 2>&1
if errorlevel 1 (
    echo тЭМ р╣Др╕бр╣Ир╕Юр╕Ъ Node.js р╕Бр╕гр╕╕р╕Ур╕▓р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Node.js р╕Бр╣Ир╕нр╕Щ
    echo р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Фр╣Йр╕Чр╕╡р╣И: https://nodejs.org/
    pause
    exit /b 1
)

REM р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Python р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╣Йр╕зр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
python --version >nul 2>&1
if errorlevel 1 (
    echo тЭМ р╣Др╕бр╣Ир╕Юр╕Ъ Python р╕Бр╕гр╕╕р╕Ур╕▓р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Python р╕Бр╣Ир╕нр╕Щ
    echo р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Фр╣Йр╕Чр╕╡р╣И: https://python.org/
    pause
    exit /b 1
)

REM р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ npm р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╣Йр╕зр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
npm --version >nul 2>&1
if errorlevel 1 (
    echo тЭМ р╣Др╕бр╣Ир╕Юр╕Ъ npm р╕Бр╕гр╕╕р╕Ур╕▓р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З npm р╕Бр╣Ир╕нр╕Щ
    pause
    exit /b 1
)

echo тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ dependencies р╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕в


REM р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Node.js dependencies р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╣Йр╕зр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
if not exist "node_modules" (
    echo ЁЯУе р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Node.js dependencies...
    npm install
)

echo тЬЕ р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ
echo.
echo ЁЯМР р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М...
echo ==========================================

REM р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ Flask backend р╣Гр╕Щр╕Юр╕╖р╣Йр╕Щр╕лр╕ер╕▒р╕З
echo ЁЯРН р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ Flask backend (http://localhost:5000)...
cd server
start /B python app.py
cd ..

REM р╕гр╕нр╕кр╕▒р╕Бр╕Др╕гр╕╣р╣Ир╣Гр╕лр╣Й Flask р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ
timeout /t 3 /nobreak >nul

REM р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ Next.js frontend
echo тЪЫя╕П  р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ Next.js frontend (http://localhost:3000)...
start /B npm run dev

echo.
echo ЁЯОЙ р╕гр╕░р╕Ър╕Ър╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ!
echo ==========================================
echo ЁЯМР Frontend: http://localhost:3000
echo ЁЯФз Backend:  http://localhost:5000
echo.
echo р╕Бр╕Ф Ctrl+C р╣Ар╕Юр╕╖р╣Ир╕нр╕лр╕вр╕╕р╕Фр╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М
echo.

REM р╕гр╕нр╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Бр╕Фр╕Ыр╕╕р╣Ир╕бр╣Гр╕Фр╣Ж
pause 